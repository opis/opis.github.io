<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="php, database, abstraction, query builder, schema builder">
<meta name="description" content="Learn how to filter records">
<title>Filter records | Opis Database</title>
        
        <link href="/assets/img/favicon.png" rel="shortcut icon">
        
        <link rel="stylesheet" href="/assets/css/flatly-theme.min.css">
<link href="/assets/css/font-awesome.css" rel="stylesheet">

<link href="/assets/css/syntax.css" rel="stylesheet">



<link href="/assets/css/project.css" rel="stylesheet">


        <!--[if lt IE 9]>
<script src="/assets/js/html5shiv.js"></script>
<script src="/assets/js/respond.min.js"></script>
<![endif]-->
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="/assets/js/jquery-1.11.0.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/assets/js/bootstrap.min.js"></script>


<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-50415801-1', 'opis.io');
    ga('send', 'pageview');
</script>

    </head>
    <body>
        <header id="header" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <img src="/assets/img/opis-gs-100.png" class="img-responsive opis-inline-logo">
            <a href="" class="navbar-brand">
                <strong>
                    Database
                </strong>
            </a>
            <button data-target="#navbar-main" data-toggle="collapse" type="button" class="navbar-toggle">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <nav id="navbar-main" class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <li>
                    <a href="http://www.opis.io" title="Main page">
                        <span class="fa fa-home"></span> Home
                    </a>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <span class="fa fa-cogs"></span> Components <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/cache" title="Caching library">Cache</a></li>
                        <li><a href="/closure" title="Serializable closures">Closure</a></li>
                        <li><a href="/config" title="Configuration manager">Config</a></li>
                        <li><a href="/container" title="Dependency injection container">Container</a></li>
                        <li><a href="/database" title="Database abstraction layer">Database</a></li>
                        <li><a href="/events" title="Events library">Events</a></li>
                        <li><a href="https://github.com/opis/http" title="HTTP library">HTTP</a></li>
                        <li><a href="/http-routing" title="HTTP routing library">HTTP Routing</a></li>
                        <li><a href="/routing" title="Routing framework">Routing</a></li>
                        <li><a href="/session" title="Session manager">Session</a></li>
                        <li><a href="/utils" title="Utilitary classes">Utils</a></li>
                        <li><a href="/view" title="Rendering engine">View</a></li>
                    </ul>
                </li>
                <li>
                    <a href="https://github.com/opis/database" title="Github page">
                        <span class="fa fa-github fa-lg"></span> GitHub
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<section>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="list-group">
                
                    
                        
<a href="/database" class="list-group-item">

    <h4 class="list-group-item-heading">About</h4>
    <p class="list-group-item-text text-muted">
        Getting started with Opis Database
    </p>
</a>
                    
                
                    
                        
<a href="/database/connection.html" class="list-group-item">

    <h4 class="list-group-item-heading">Connections</h4>
    <p class="list-group-item-text text-muted">
        Learn how to connect to a database
    </p>
</a>
                    
                
                    
                        
<a href="/database/select.html" class="list-group-item">

    <h4 class="list-group-item-heading">Fetching records</h4>
    <p class="list-group-item-text text-muted">
        Fetching records from a database
    </p>
</a>
                    
                
                    
                        
<a href="/database/result.html" class="list-group-item">

    <h4 class="list-group-item-heading">Results handling</h4>
    <p class="list-group-item-text text-muted">
        Learn how to handle the result set of a query
    </p>
</a>
                    
                
                    
                        
<a href="/database/aggregate.html" class="list-group-item">

    <h4 class="list-group-item-heading">Aggregate functions</h4>
    <p class="list-group-item-text text-muted">
        Learn about aggregate functions
    </p>
</a>
                    
                
                    
                        
<a href="/database/defining-columns.html" class="list-group-item">

    <h4 class="list-group-item-heading">Defining fetched columns</h4>
    <p class="list-group-item-text text-muted">
        Learn about how to define selected columns
    </p>
</a>
                    
                
                    
                        
<a href="/database/filter.html" class="list-group-item active">

    <h4 class="list-group-item-heading">Filters</h4>
    <p class="list-group-item-text text-muted">
        Learn how to filter records
    </p>
</a>
                    
                
                    
                        
<a href="/database/order.html" class="list-group-item">

    <h4 class="list-group-item-heading">Ordering criteria</h4>
    <p class="list-group-item-text text-muted">
        Learn how to order results
    </p>
</a>
                    
                
                    
                        
<a href="/database/limit.html" class="list-group-item">

    <h4 class="list-group-item-heading">Limits and offsets</h4>
    <p class="list-group-item-text text-muted">
        Learn about limits and offsets
    </p>
</a>
                    
                
                    
                        
<a href="/database/expression.html" class="list-group-item">

    <h4 class="list-group-item-heading">Expressions</h4>
    <p class="list-group-item-text text-muted">
        Learn about expressions
    </p>
</a>
                    
                
                    
                        
<a href="/database/group.html" class="list-group-item">

    <h4 class="list-group-item-heading">Group</h4>
    <p class="list-group-item-text text-muted">
        Learn how to group results
    </p>
</a>
                    
                
                    
                        
<a href="/database/join.html" class="list-group-item">

    <h4 class="list-group-item-heading">Joins</h4>
    <p class="list-group-item-text text-muted">
        Learn how to perform joins
    </p>
</a>
                    
                
                    
                        
<a href="/database/insert.html" class="list-group-item">

    <h4 class="list-group-item-heading">Create records</h4>
    <p class="list-group-item-text text-muted">
        Insert new records into a table
    </p>
</a>
                    
                
                    
                        
<a href="/database/update.html" class="list-group-item">

    <h4 class="list-group-item-heading">Update records</h4>
    <p class="list-group-item-text text-muted">
        Learn how to update existing records
    </p>
</a>
                    
                
                    
                        
<a href="/database/delete.html" class="list-group-item">

    <h4 class="list-group-item-heading">Delete records</h4>
    <p class="list-group-item-text text-muted">
        Learn how to delete existing records
    </p>
</a>
                    
                
                    
                        
<a href="/database/transaction.html" class="list-group-item">

    <h4 class="list-group-item-heading">Transactions</h4>
    <p class="list-group-item-text text-muted">
        Learn how to use transactions
    </p>
</a>
                    
                
                    
                        
<a href="/database/schema.html" class="list-group-item">

    <h4 class="list-group-item-heading">Schema</h4>
    <p class="list-group-item-text text-muted">
        Create new tables and obtains information about existing ones
    </p>
</a>
                    
                
                </div>
            </div>
            <div class="col-md-8">
                <h1><strong>Filters</strong></h1>

<ol class="submenu">
    <li>




    

<a href="#introduction">Introduction</a></li>
    <li>
        




    

<a href="#adding-filters">Adding filters</a>
        <ol>
            <li>




    

<a href="#the-is-method">The <em>is</em> method</a></li>
            <li>




    

<a href="#the-isnot-method">The <em>isNot</em> method</a></li>
            <li>




    

<a href="#the-lessthan-method">The <em>lessThan</em> method</a></li>
            <li>




    

<a href="#the-greaterthan-method">The <em>greaterThan</em> method</a></li>
            <li>




    

<a href="#the-atleast-method">The <em>atLeast</em> method</a></li>
            <li>




    

<a href="#the-atmost-method">The <em>atMost</em> method</a></li>
            <li>




    

<a href="#the-between-method">The <em>between</em> method</a></li>
            <li>




    

<a href="#the-notbetween-method">The <em>notBetween</em> method</a></li>
            <li>




    

<a href="#the-in-method">The <em>in</em> method</a></li>
            <li>




    

<a href="#the-notin-method">The <em>notIn</em> method</a></li>
            <li>




    

<a href="#the-like-method">The <em>like</em> method</a></li>
            <li>




    

<a href="#the-notlike-method">The <em>notLike</em> method</a></li>
            <li>




    

<a href="#the-isnull-method">The <em>isNull</em> method</a></li>
            <li>




    

<a href="#the-notnull-method">The <em>notNull</em> method</a></li>
        </ol>
    </li>
    <li>




    

<a href="#multiple-conditions">Multiple conditions</a></li>
    <li>




    

<a href="#columns-comparison">Columns comparison</a></li>
    <li>




    

<a href="#the-exists-condition">The EXISTS condition</a></li>
</ol>


        


    

<h3>
    
    <strong>Introduction</strong>
    <a id="introduction" href="#introduction" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    Filtering records is one of the most important and intensively used operation in SQL.
    <strong>Opis Database</strong> aims to make data filtering an easy task for the developers,
    by implementing a set of targeted methods capable of simplifying the filtering process.
</p>


        


    

<h3>
    
    <strong>Adding filters</strong>
    <a id="adding-filters" href="#adding-filters" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    Adding a filtering condition is done by using the <code>where</code> method in conjunction with one of the
    following methods: <code>is</code> or <code>eq</code>, <code>isNot</code> or <code>ne</code>,
    <code>lessThan</code> or <code>lt</code>,<code>greaterThan</code> or <code>gt</code>,
    <code>atLeast</code> or <code>gte</code>,
    <code>atMost</code> or <code>lte</code>,
    <code>between</code>, <code>notBetween</code>, <code>in</code>, <code>notIn</code>,
    <code>like</code>, <code>notLike</code>, <code>isNull</code> and <code>notNull</code>.
</p>


    


    

<h4>
    
    <strong>The <em>is</em> method</strong>
    <a id="the-is-method" href="#the-is-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value equal
    to a given value, will be added to the result set.
    Alternatively, to add this filtering condition, you can use the <code>eq</code>(equal)
    method, which is an alias of the <code>is</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are 18.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="c1">//Alternatively: -&gt;where(&#39;age&#39;)-&gt;eq(18)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">=</span> <span class="mi">18</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>isNot</em> method</strong>
    <a id="the-isnot-method" href="#the-isnot-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value
    not equal to a given value, will be added to the result set.
    Alternatively, to add this filtering condition, you can use the <code>ne</code>(not equal)
    method, which is an alias of the <code>isNot</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are not 18.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">isNot</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="c1">//Alternatively: -&gt;where(&#39;age&#39;)-&gt;ne(18)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">!=</span> <span class="mi">18</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>lessThan</em> method</strong>
    <a id="the-lessthan-method" href="#the-lessthan-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value lesser
    than a given value, will be added to the result set.
    Alternatively, to add this filtering condition, you can use the <code>lt</code>(less than)
    method, which is an alias of the <code>lessThan</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are under 18.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">lessThan</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="c1">//Alternatively: -&gt;where(&#39;age&#39;)-&gt;lt(18)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">&lt;</span> <span class="mi">18</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>greaterThan</em> method</strong>
    <a id="the-greaterthan-method" href="#the-greaterthan-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those, records that have the specified column's value greater
    than a given value, will be added to the result set.
    Alternatively, to add this filtering condition, you can use the <code>gt</code>(greater than)
    method, which is an alias of the <code>greaterThan</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are over 18.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">greaterThan</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="c1">//Alternatively: -&gt;where(&#39;age&#39;)-&gt;gt(18)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">&gt;</span> <span class="mi">18</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>atLeast</em> method</strong>
    <a id="the-atleast-method" href="#the-atleast-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value greater
    than or equal to a given value, will be added to the result set.
    Alternatively, to add this filtering condition, you can use the <code>gte</code>(greater than or equal)
    method, which is an alias of the <code>atLeast</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are at least 18.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">atLeast</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="c1">//Alternatively: -&gt;where(&#39;age&#39;)-&gt;gte(18)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">&gt;=</span> <span class="mi">18</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>atMost</em> method</strong>
    <a id="the-atmost-method" href="#the-atmost-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value lesser
    than or equal to a given value, will be added to the result set.
    Alternatively, to add this filtering condition, you can use the <code>lte</code>(less than or equal)
    method, which is an alias of the <code>atMost</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are at most 18.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">atMost</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span> <span class="c1">//Alternatively: -&gt;where(&#39;age&#39;)-&gt;lte(18)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">&lt;=</span> <span class="mi">18</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>between</em> method</strong>
    <a id="the-between-method" href="#the-between-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value
    within a given range, will be added to the result set.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are between 18 and 21.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">between</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="k">BETWEEN</span> <span class="mi">18</span> <span class="k">AND</span> <span class="mi">21</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>notBetween</em> method</strong>
    <a id="the-notbetween-method" href="#the-notbetween-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that don't have the specified column's value
    within a given range, will be added to the result set.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are not between 18 and 21.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">notBetween</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="k">NOT</span> <span class="k">BETWEEN</span> <span class="mi">18</span> <span class="k">AND</span> <span class="mi">21</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>in</em> method</strong>
    <a id="the-in-method" href="#the-in-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value
    contained within a given set of values, will be added to the result set.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are living in London, New York or Paris.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">in</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;Paris&#39;</span><span class="p">))</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="k">IN</span> <span class="p">(</span><span class="ss">&quot;London&quot;</span><span class="p">,</span> <span class="ss">&quot;New York&quot;</span><span class="p">,</span> <span class="ss">&quot;Paris&quot;</span><span class="p">)</span>
</code></pre></div>

<p>
    Instead of providing a set of values by passing an array to the <code>in</code> method, you could also
    obtain a set of values by using a subquery. To use a subquery, just pass
    an anonymous function callback as an argument to the <code>in</code> method, then use the object that
    will be passed as an argument to your callback function to build your query.
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that are living in a city</span>
<span class="sd"> * which has a population of over 10 millions inhabitants.</span>
<span class="sd"> */</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">in</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$query</span><span class="p">){</span>
                <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;cities&#39;</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">atLeast</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
             <span class="p">})</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">cities</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">population</span><span class="o">`</span> <span class="o">&gt;=</span> <span class="mi">10000000</span><span class="p">)</span>
</code></pre></div>



    


    

<h4>
    
    <strong>The <em>notIn</em> method</strong>
    <a id="the-notin-method" href="#the-notin-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that don't have the specified column's value
    contained within a given set of values, will be added to the result set.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are not living in London, New York or Paris.</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">notIn</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;London&#39;</span><span class="p">,</span> <span class="s1">&#39;New York&#39;</span><span class="p">,</span> <span class="s1">&#39;Paris&#39;</span><span class="p">))</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="k">NOT</span> <span class="k">IN</span> <span class="p">(</span><span class="ss">&quot;London&quot;</span><span class="p">,</span> <span class="ss">&quot;New York&quot;</span><span class="p">,</span> <span class="ss">&quot;Paris&quot;</span><span class="p">)</span>
</code></pre></div>

<p>
    As in the case of the <code>in</code> method, you could obtain a set of values to be used
    for comparison, by using a subquery.
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that are not living in a city</span>
<span class="sd"> * which has a population of over 10 millions inhabitants.</span>
<span class="sd"> */</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">notIn</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$query</span><span class="p">){</span>
                <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;cities&#39;</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">atLeast</span><span class="p">(</span><span class="mi">10000000</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">select</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
             <span class="p">})</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="k">NOT</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">cities</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">population</span><span class="o">`</span> <span class="o">&gt;=</span> <span class="mi">10000000</span><span class="p">)</span>
</code></pre></div>



    


    

<h4>
    
    <strong>The <em>like</em> method</strong>
    <a id="the-like-method" href="#the-like-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records,
    whose specified column's value match a given pattern, will be added to the result set. 
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that are living in a city</span>
<span class="sd"> * whose name starts with the letter &#39;P&#39;.</span>
<span class="sd"> */</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">like</span><span class="p">(</span><span class="s1">&#39;P%&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="k">LIKE</span> <span class="ss">&quot;P%&quot;</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>notLike</em> method</strong>
    <a id="the-notlike-method" href="#the-notlike-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records,
    whose specified column's value don't match a given pattern, will be added to the result set. 
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that are living in a city</span>
<span class="sd"> * whose name doesn&#39;t starts with the letter &#39;P&#39;.</span>
<span class="sd"> */</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">notLike</span><span class="p">(</span><span class="s1">&#39;P%&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="k">NOT</span> <span class="k">LIKE</span> <span class="ss">&quot;P%&quot;</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>isNull</em> method</strong>
    <a id="the-isnull-method" href="#the-isnull-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value
    equal to <code>NULL</code>, will be added to the result set.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that do not have a website.</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;website&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">isNull</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">website</span><span class="o">`</span> <span class="k">IS</span> <span class="k">NULL</span>
</code></pre></div>


    


    

<h4>
    
    <strong>The <em>notNull</em> method</strong>
    <a id="the-notnull-method" href="#the-notnull-method" class="link-anchor"><span class="fa fa-link"></span></a>
</h4>

<p>
    Adds a filtering condition, so that only those records, that have the specified column's value
    not equal to <code>NULL</code>, will be added to the result set.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that do have a website.</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;website&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">notNull</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">website</span><span class="o">`</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
</code></pre></div>


        


    

<h3>
    
    <strong>Multiple conditions</strong>
    <a id="multiple-conditions" href="#multiple-conditions" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    Adding multiple conditions to your query is done by using the <code>andWhere</code> and <code>orWhere</code> methods.
    Those methods works exactly as the <code>where</code> method and depending on which method you use,
    they will combine with the previous declared condition by using an <code>AND</code> or an <code>OR</code> operator. 
</p>

<p>
    To add an additional condition to your query, that combines with the previous declared condition by using an
    <code>AND</code> operator, use the <code>andWhere</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are 18 and are living in London.</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">andWhere</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="s1">&#39;London&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">=</span> <span class="mi">18</span> <span class="k">AND</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="o">=</span> <span class="ss">&quot;London&quot;</span>
</code></pre></div>

<p>
    To add an additional condition to your query, that combines with the previous declared condition by using an
    <code>OR</code> operator, use the <code>orWhere</code> method.
</p>

<div class="highlight"><pre><code class="php"><span class="c1">// Select all users that are either 18 or 21.</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">orWhere</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">=</span> <span class="mi">18</span> <span class="k">OR</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">=</span> <span class="mi">21</span>
</code></pre></div>

<p>
    You can group your conditions in order to add a more complex filter to your query.
    Grouping conditions is done by passing as an argument to the <code>where</code>,
    <code>andWhere</code> or the <code>orWhere</code> methods an anonymous callback function.
    The callback functions takes a single argument that will be further used to add filtering conditions
    to your query.
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that are 18 and</span>
<span class="sd"> * are living either in London or Paris.</span>
<span class="sd"> */</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">andWhere</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$group</span><span class="p">){</span>
                <span class="nv">$group</span><span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="s1">&#39;London&#39;</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">orWhere</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">is</span><span class="p">(</span><span class="s1">&#39;Paris&#39;</span><span class="p">);</span>
             <span class="p">})</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">age</span><span class="o">`</span> <span class="o">=</span> <span class="mi">18</span> <span class="k">AND</span> <span class="p">(</span><span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="o">=</span> <span class="ss">&quot;London&quot;</span> <span class="k">OR</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="o">=</span> <span class="ss">&quot;Paris&quot;</span><span class="p">)</span>
</code></pre></div>


        


    

<h3>
    
    <strong>Columns comparison</strong>
    <a id="columns-comparison" href="#columns-comparison" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    <strong>Opis Database</strong> allows you to add comparision conditions between columns.
    You can add comparision conditions between two columns, by passing <code>TRUE</code> as a second argument
    to the <code>is</code>, <code>isNot</code>, <code>lessThan</code>, <code>greaterThan</code>,
    <code>atLeast</code> and <code>atMost</code> methods, or to their corresponding aliases <code>eq</code>
    , <code>ne</code>, <code>lt</code>, <code>gt</code>, <code>lte</code> and <code>gte</code> methods.
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that are living in the same city they were born.</span>
<span class="sd"> */</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">eq</span><span class="p">(</span><span class="s1">&#39;birthplace&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="o">=</span> <span class="o">`</span><span class="n">birthplace</span><span class="o">`</span>
</code></pre></div>

<p>
    Building the above query without passing <code>TRUE</code> as the second argument to the
    <code>eq</code> method, will result into a query that will select all users that are living in
    a city named <code>birthplace</code>.
</p>

<div class="highlight"><pre><code class="php"><span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">eq</span><span class="p">(</span><span class="s1">&#39;birthplace&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">city</span><span class="o">`</span> <span class="o">=</span> <span class="ss">&quot;birthplace&quot;</span>
</code></pre></div>


        


    

<h3>
    
    <strong>The EXISTS condition</strong>
    <a id="the-exists-condition" href="#the-exists-condition" class="link-anchor"><span class="fa fa-link"></span></a>
</h3>

<p>
    This condition is used in combination with a subquery and is considered to be met,
    if the subquery returns at least one row.
    Adding an <code>EXISTS</code> condition is done by using the <code>whereExists</code> and the <code>whereNotExists</code> methods.
    You can add multiple <strong>EXISTS</strong> conditions by using the <code>andWhereExists</code> or <code>andWhereNotExists</code> methods
    and the <code>orWhereExists</code> or <code>orWhereNotExists</code> methods.
</p>

<p>
    This methods are used in a similar manner as the <code>where</code>,
    <code>andWhere</code> and <code>orWhere</code> methods,
    receiving as an argument an anonymous function callback, that will be further used to build a subquery.
</p>

<div class="highlight"><pre><code class="php"><span class="sd">/**</span>
<span class="sd"> * Select all users that had purchased at least one product.</span>
<span class="sd"> */</span>
 
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span>
             <span class="o">-&gt;</span><span class="na">whereExists</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$query</span><span class="p">){</span>
                <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">from</span><span class="p">(</span><span class="s1">&#39;orders&#39;</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">where</span><span class="p">(</span><span class="s1">&#39;orders.name&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">eq</span><span class="p">(</span><span class="s1">&#39;users.name&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>
                      <span class="o">-&gt;</span><span class="na">select</span><span class="p">();</span>
             <span class="p">})</span>
             <span class="o">-&gt;</span><span class="na">select</span><span class="p">()</span>
             <span class="o">-&gt;</span><span class="na">all</span><span class="p">();</span>
</code></pre></div>
<div class="highlight"><pre><code class="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span> <span class="k">WHERE</span> <span class="k">EXISTS</span> <span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="o">`</span><span class="n">orders</span><span class="o">`</span> <span class="k">WHERE</span> <span class="o">`</span><span class="n">orders</span><span class="o">`</span><span class="p">.</span><span class="o">`</span><span class="n">name</span><span class="o">`</span> <span class="o">=</span> <span class="o">`</span><span class="n">users</span><span class="o">`</span><span class="p">.</span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="p">)</span>
</code></pre></div>


                





    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
                
            
        
    

    
        
            
        
    

    
        
            
                
                
            
        
    

    

    

    

    

    

    

    

    

    


<ul class="pager">
  
  <li class="previous"><a href="/database/defining-columns.html" title="Defining fetched columns">&larr; Back</a></li>
  
  
  <li class="next"><a href="/database/order.html" title="Ordering criteria">Next &rarr;</a></li>
  
</ul>
                
            </div>
        </div>
    </div>
</section>

<footer class="text-center text-muted">
    Copyright &copy; 2014-2015 Marius Sarca. All rights reserved.
</footer>

    </body>
</html>
