---
layout: database
title: Connections | Opis Database
keywords: php, database, abstraction, query builder, schema builder
description: Learn how to define connections and how to connect to a database
active: connections
---
<h1><strong>Connections</strong></h1>
<p>
    In order to be able to manipulate records from a database a connection must be defined created.
    A connection can be created by using the helper methods provided by the <kbd>Opis\Database\Connection</kbd> class.
    All connection objects are instances of <kbd>Opis\Database\Connection</kbd> or of a derived class. 
</p>
<p>
    The role of the connection class is to allow a user to build a valid
    <a href="http://en.wikipedia.org/wiki/Data_source_name" target="_blank" data-toggle="tooltip" title="Data source name">DSN</a>
    that will be finally used to construct a new <kbd>PDO</kbd> object that will establish a connection to the specified database.
    A connection class also defines what type of query builder(compiler) will be used to parse user's queries to the database. 
</p>
<h3><strong>2.1 Generic connections</strong></h3>
<p>
    A generic connection is a connection type where the user must provide the full
    <a href="http://en.wikipedia.org/wiki/Data_source_name" target="_blank" data-toggle="tooltip" title="Data source name">DSN</a>
    in order to establish a connection to a database.
</p>
{% highlight php startinline %}
use Opis\Database\Connection;
use Opis\Database\Database;

$connection = Connection::generic('mysql:host=localhost;dbname=test',
                                  'username',
                                  'password');

$db = new Database($connection);
{% endhighlight %}
<p>
    Once the connection is established, <strong>Opis Database</strong> will try to figure out itself
    what's the most appropriate query builder to be used with that connection.
</p>
<p>
If you have created a new query builder or extended an existing one, and you wish to associate the query builder with the connection, you can accomplish that
by providing a callback to the <kbd>setCompiler</kbd> method that will return an instance of your query builder.
</p>
{% highlight php startinline %}
$connection = Connection::generic('mysql:host=localhost;dbname=test',
                                  'username',
                                  'password')
                        ->setCompiler(function(){
                            return new MyCustomCompiler();
                        });
{% endhighlight %}
